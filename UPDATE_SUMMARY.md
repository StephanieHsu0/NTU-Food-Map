# 更新內容清單

## 📋 本次更新摘要

本次更新主要包含以下功能改進和修復：

### ✨ 新增功能

1. **類別過濾功能**
   - 實作完整的類別過濾系統（餐廳、咖啡廳、小吃、夜市、速食、日式、中式、西式）
   - 日式/中式/西式類別支援評論關鍵字檢查
   - 整合 Google Places API 類型映射
   - 支援多類別同時選擇

2. **評論資料顯示**
   - 新增評論資料獲取功能（從 Google Places API）
   - 在店家詳情頁顯示評論列表
   - 顯示評論者資訊、評分、時間和內容

3. **多語言地圖支援**
   - Google Map 本身支援語言切換（中文/英文）
   - 根據頁面語言自動切換地圖語言

### 🔧 功能改進

1. **地圖互動優化**
   - 點擊店家時自動定位並標記
   - 修復多層圓圈問題（現在只會顯示一個搜索半徑圓圈）
   - 改進地圖標記設計（使用顏色編碼的 $ 符號表示價位）
   - 修復重置後無法重新選擇位置的問題

2. **篩選功能改進**
   - 修復「僅顯示營業中」篩選功能
   - 距離滑桿範圍調整（最小 100 公尺）
   - 移除「外籍生友善」功能（根據需求）

3. **UI/UX 改進**
   - 修復所有文字顏色被背景遮蓋的問題
   - 確保所有文字元素都有明確的顏色設定
   - 改進 InfoWindow 顯示內容

4. **多語言支援**
   - 修復英文版頁面仍顯示中文的問題
   - 新增多個翻譯鍵值
   - 完善所有頁面的多語言支援

### 🐛 Bug 修復

1. 修復「查看詳情」頁面空白問題
2. 修復店家詳情頁資料顯示不完整問題
3. 修復文字顏色被背景遮蓋問題
4. 修復地圖點擊事件處理問題
5. 修復多層圓圈顯示問題

### 📝 專案整理

1. 刪除重複的文檔檔案（VERCEL_DEPLOYMENT_CHECKLIST.md）
2. 更新專案文檔引用
3. 新增 ENV_SETUP.md 環境設定說明

### 📊 修改統計

- **17 個檔案修改**
- **新增 771 行，刪除 361 行**
- **新增 1 個檔案** (ENV_SETUP.md)

### 📁 主要修改檔案

#### 核心功能
- `client/utils/googlePlaces.ts` - 新增類別過濾和評論關鍵字檢查
- `client/utils/types.ts` - 新增 PlaceReview 介面
- `client/app/api/places/route.ts` - 新增 open_now 過濾邏輯

#### UI 組件
- `client/components/Map.tsx` - 地圖互動改進、多語言支援
- `client/components/Filters.tsx` - 移除外籍生友善、改進篩選器
- `client/app/[locale]/place/[id]/page.tsx` - 評論顯示、多語言支援
- `client/components/PlaceCard.tsx` - 文字顏色修復
- `client/components/ScoreBreakdown.tsx` - 文字顏色修復

#### 多語言
- `client/lib/i18n/zh.json` - 新增翻譯鍵值
- `client/lib/i18n/en.json` - 新增翻譯鍵值

#### 其他
- `client/lib/scoring.ts` - 移除外籍生友善評分邏輯
- `server/src/scoring.ts` - 移除外籍生友善評分邏輯
- `PROJECT_ARCHITECTURE.md` - 更新文檔引用
- `PROJECT_STRUCTURE.md` - 更新文檔引用

### ⚠️ 注意事項

1. 本次更新包含大量功能改進，建議完整測試
2. 類別過濾功能依賴 Google Places API 的評論資料
3. 多語言地圖需要重新載入 Google Maps API（已實作自動處理）

### 🧪 建議測試項目

1. 類別過濾功能（特別是日式/中式/西式）
2. 地圖互動（點擊、標記、圓圈）
3. 多語言切換（中文/英文）
4. 店家詳情頁評論顯示
5. 所有篩選功能
6. 文字顏色顯示

